const LearnBrowser=function(){function b(j){const k=f(j);i.tests.push(k),j.pending?i.pending.push(k):'passed'===j.state?i.passes.push(k):'failed'===j.state&&i.failures.push(k)}function c(j){h.examples=j.total,h.passing_count=j.stats.passes,h.failure_count=j.stats.failures,h.pending_count=j.stats.pending,i.stats=j.stats,h.build.test_suite[0].duration=j.stats}function d(j){fetch('learn.auth.data.json').then(k=>k.json()).then(k=>Object.assign({},k,j)).then(k=>e(k)).catch(k=>console.error(k))}function e(j){fetch('http://ironbroker-v2.flatironschool.com/e/flatiron_mocha',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(j),mode:'no-cors'}).then(k=>{k.ok||('opaque'===k.type?console.warn('\'no-cors\' mode enabled.'):console.error(k))}).catch(k=>console.error(k))}function f(j){return{title:j.title,fullTitle:g(j),duration:j.duration,currentRetry:j._currentRetry,err:j.err}}function g(j){let k=j.title,l=j.parent;for(;l&&'Suite'===l.constructor.name;)k=l.title.concat(' ',k),l=l.parent;return k}const h={build:{test_suite:[{framework:'mocha',formatted_output:{tests:[],pending:[],failures:[],passes:[]}}]}},i=h.build.test_suite[0].formatted_output;return{test:function(){const j=mocha.run().on('test end',k=>b(k)).on('end',()=>{'/.*/'===j._grep.toString()?(c(j),d(h)):console.warn('Not all tests ran. Not pushing data to Learn.')})}}}();
